<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IrsanAI-LRP v1.3 - Meta-Prompt Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .version-badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            backdrop-filter: blur(10px);
        }

        .stats-bar {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat {
            background: rgba(255,255,255,0.15);
            padding: 8px 16px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            font-size: 0.85em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideUp 0.6s ease-out;
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .icon {
            width: 24px;
            height: 24px;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: inherit;
            font-size: 0.95em;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .option-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .option-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102,126,234,0.2);
        }

        .option-card.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option-card h3 {
            font-size: 1em;
            margin-bottom: 5px;
            color: #667eea;
        }

        .option-card p {
            font-size: 0.85em;
            color: #666;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 15px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102,126,234,0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .output-section {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .metrics {
            display: flex;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .metric {
            flex: 1;
            min-width: 150px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
        }

        .metric-label {
            font-size: 0.85em;
            color: #666;
            margin-top: 5px;
        }

        .confidence-bar {
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .confidence-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            transition: width 0.5s ease-out;
        }

        .alert {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }

        .alert-success {
            background: #d4edda;
            border-color: #28a745;
        }

        .feature-tag {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            margin-left: 8px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            white-space: nowrap;
            z-index: 1000;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
            color: #666;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ IrsanAI-LRP v1.3</h1>
            <span class="version-badge">Next-Level Meta-Prompt Generator</span>
            <div class="stats-bar">
                <div class="stat">üìä Token-Optimiert</div>
                <div class="stat">üîí DSGVO-Konform</div>
                <div class="stat">‚ö° Intent-Confidence</div>
                <div class="stat">üåê Multi-LLM</div>
            </div>
        </div>

        <div class="main-grid">
            <div class="card">
                <h2>
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
                    </svg>
                    Deine Anfrage
                    <span class="feature-tag">NEU</span>
                </h2>
                
                <textarea id="userPrompt" placeholder="Beschreibe dein Vorhaben...

Beispiele:
‚Ä¢ Erstelle eine PyGame Wetter-App mit Live-Daten
‚Ä¢ Baue mir einen Portfolio-Website-Generator
‚Ä¢ Entwickle ein Machine Learning Dashboard
‚Ä¢ Schreibe ein Python-Skript f√ºr Datenanalyse

Je pr√§ziser, desto besser das Ergebnis!"></textarea>

                <div class="metrics">
                    <div class="metric">
                        <div class="metric-value" id="charCount">0</div>
                        <div class="metric-label">Zeichen</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="tokenEstimate">0</div>
                        <div class="metric-label">‚âà Tokens</div>
                    </div>
                    <div class="metric">
                        <div class="metric-value" id="complexity">-</div>
                        <div class="metric-label">Komplexit√§t</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6z"/>
                    </svg>
                    Intelligente Analyse
                </h2>

                <div id="analysisResult">
                    <div style="text-align: center; padding: 40px; color: #999;">
                        <svg width="64" height="64" fill="currentColor" viewBox="0 0 20 20" style="opacity: 0.3;">
                            <path d="M10 2a8 8 0 100 16 8 8 0 000-16zM9 9a1 1 0 012 0v4a1 1 0 11-2 0V9zm1-5a1 1 0 100 2 1 1 0 000-2z"/>
                        </svg>
                        <p style="margin-top: 15px;">Gib deine Anfrage ein, um die Analyse zu starten</p>
                    </div>
                </div>

                <button class="btn" onclick="analyzePrompt()">üîç Anfrage Analysieren</button>
            </div>
        </div>

        <div class="card">
            <h2>
                <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5z"/>
                </svg>
                Konfiguration
                <span class="tooltip" data-tip="W√§hle deine bevorzugten Optionen">‚ÑπÔ∏è</span>
            </h2>

            <div class="tabs">
                <div class="tab active" onclick="switchTab('llm')">ü§ñ LLM-Ziel</div>
                <div class="tab" onclick="switchTab('features')">‚öôÔ∏è Features</div>
                <div class="tab" onclick="switchTab('advanced')">üîß Erweitert</div>
            </div>

            <div class="tab-content active" id="llm-tab">
                <div class="options-grid" id="llmOptions">
                    <div class="option-card selected" data-llm="universal" onclick="selectLLM(this)">
                        <h3>üåê Universal</h3>
                        <p>Funktioniert mit allen LLMs (empfohlen)</p>
                    </div>
                    <div class="option-card" data-llm="chatgpt" onclick="selectLLM(this)">
                        <h3>üü¢ ChatGPT</h3>
                        <p>Optimiert f√ºr OpenAI</p>
                    </div>
                    <div class="option-card" data-llm="claude" onclick="selectLLM(this)">
                        <h3>üü£ Claude</h3>
                        <p>Optimiert f√ºr Anthropic</p>
                    </div>
                    <div class="option-card" data-llm="gemini" onclick="selectLLM(this)">
                        <h3>üîµ Gemini</h3>
                        <p>Optimiert f√ºr Google</p>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="features-tab">
                <div style="display: grid; gap: 10px;">
                    <label style="display: flex; align-items: center; gap: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="intentConfidence" checked>
                        <div>
                            <strong>Intent-Confidence Score</strong>
                            <span class="feature-tag">v1.3</span>
                            <br><small>Zeigt Sicherheit der Interpretation</small>
                        </div>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="tokenOptimization" checked>
                        <div>
                            <strong>Token-Optimierung</strong>
                            <br><small>Conditional Pre-Selector (spart bis zu 40% Tokens)</small>
                        </div>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="emergencyFallback" checked>
                        <div>
                            <strong>Emergency Fallback</strong>
                            <span class="feature-tag">v1.3</span>
                            <br><small>Sicherheitsnetz bei LLM-Fehlern</small>
                        </div>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; padding: 10px; background: #f8f9fa; border-radius: 8px; cursor: pointer;">
                        <input type="checkbox" id="versionCheck">
                        <div>
                            <strong>Version-Checker</strong>
                            <span class="feature-tag">v1.3</span>
                            <br><small>Warnt bei veralteten Protokollen</small>
                        </div>
                    </label>
                </div>
            </div>

            <div class="tab-content" id="advanced-tab">
                <div style="display: grid; gap: 15px;">
                    <div>
                        <label><strong>Token-Budget:</strong></label>
                        <input type="range" id="tokenBudget" min="500" max="4000" value="2000" step="100" 
                               style="width: 100%;" oninput="document.getElementById('tokenValue').textContent = this.value">
                        <div style="text-align: center; margin-top: 5px;">
                            <span id="tokenValue">2000</span> Tokens
                        </div>
                    </div>
                    <div>
                        <label><strong>Sprache:</strong></label>
                        <select id="language" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid #e0e0e0;">
                            <option value="de">üá©üá™ Deutsch</option>
                            <option value="en">üá¨üáß English</option>
                            <option value="fr">üá´üá∑ Fran√ßais</option>
                            <option value="es">üá™üá∏ Espa√±ol</option>
                        </select>
                    </div>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="generateLRP()">
                ‚ö° LRP-Protokoll Generieren
            </button>
        </div>

        <div class="card">
            <h2>
                <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 5a2 2 0 012-2h12a2 2 0 012 2v10a2 2 0 01-2 2H4a2 2 0 01-2-2V5z"/>
                </svg>
                Generiertes LRP-Protokoll
                <button onclick="copyToClipboard()" style="float: right; padding: 8px 15px; background: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    üìã Kopieren
                </button>
            </h2>
            <div class="output-section" id="output">Hier erscheint dein generiertes LRP-Protokoll...</div>
        </div>
    </div>

    <script>
        let selectedLLM = 'universal';
        let analysisData = null;

        const userPrompt = document.getElementById('userPrompt');
        userPrompt.addEventListener('input', updateMetrics);

        function updateMetrics() {
            const text = userPrompt.value;
            const chars = text.length;
            const tokens = Math.ceil(chars / 4);
            const complexity = chars < 50 ? 'Niedrig' : chars < 200 ? 'Mittel' : 'Hoch';

            document.getElementById('charCount').textContent = chars;
            document.getElementById('tokenEstimate').textContent = tokens;
            document.getElementById('complexity').textContent = complexity;
        }

        function selectLLM(element) {
            document.querySelectorAll('#llmOptions .option-card').forEach(card => {
                card.classList.remove('selected');
            });
            element.classList.add('selected');
            selectedLLM = element.dataset.llm;
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tab + '-tab').classList.add('active');
        }

        function analyzePrompt() {
            const prompt = userPrompt.value.trim();
            if (!prompt) {
                alert('Bitte gib zuerst eine Anfrage ein!');
                return;
            }

            // Intelligente Analyse
            const hasCode = /code|app|programm|skript|website|software/i.test(prompt);
            const hasHardware = /gpu|aufl√∂sung|performance|game|spiel|3d/i.test(prompt);
            const hasPersistence = /speicher|datenbank|save|persist|fortschritt/i.test(prompt);
            
            const confidence = Math.min(95, 60 + (prompt.length / 10));
            const recommendedPath = (hasCode || hasHardware || hasPersistence) ? 2 : 1;

            analysisData = {
                confidence,
                recommendedPath,
                hasCode,
                hasHardware,
                hasPersistence
            };

            const resultDiv = document.getElementById('analysisResult');
            resultDiv.innerHTML = `
                <div class="alert alert-success">
                    <strong>‚úÖ Analyse abgeschlossen!</strong>
                </div>
                
                <div style="margin: 15px 0;">
                    <strong>Intent-Confidence:</strong>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: ${confidence}%"></div>
                    </div>
                    <div style="text-align: center; color: #667eea; font-weight: 600;">
                        ${confidence.toFixed(0)}% Sicherheit
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 15px 0;">
                    <strong>üìä Erkannte Eigenschaften:</strong>
                    <ul style="margin: 10px 0 0 20px;">
                        <li>${hasCode ? '‚úÖ' : '‚ùå'} Code-Generierung erforderlich</li>
                        <li>${hasHardware ? '‚úÖ' : '‚ùå'} Hardware-Optimierung n√∂tig</li>
                        <li>${hasPersistence ? '‚úÖ' : '‚ùå'} Persistenz-Anforderungen</li>
                    </ul>
                </div>

                <div style="background: ${recommendedPath === 2 ? '#fff3cd' : '#d4edda'}; padding: 15px; border-radius: 8px; border-left: 4px solid ${recommendedPath === 2 ? '#ffc107' : '#28a745'};">
                    <strong>üí° Empfehlung:</strong><br>
                    ${recommendedPath === 2 ? 
                        '‚ö†Ô∏è <strong>Weg 2</strong> - OS/HW-Erkennung wird empfohlen f√ºr optimale Ergebnisse' :
                        '‚úÖ <strong>Weg 1</strong> - Direkte Antwort ist ausreichend'}
                </div>
            `;
        }

        function generateLRP() {
            const prompt = userPrompt.value.trim();
            if (!prompt) {
                alert('Bitte gib zuerst eine Anfrage ein!');
                return;
            }

            const timestamp = new Date().toISOString();
            const taskId = 'usr_' + Date.now() + '_' + Math.random().toString(36).substr(2, 6);
            const uniqueKey = Math.random().toString(36).substr(2, 9);
            
            const intentConfidence = document.getElementById('intentConfidence').checked;
            const tokenOptimization = document.getElementById('tokenOptimization').checked;
            const emergencyFallback = document.getElementById('emergencyFallback').checked;
            const versionCheck = document.getElementById('versionCheck').checked;
            const tokenBudget = document.getElementById('tokenBudget').value;
            const language = document.getElementById('language').value;

            const isSimplePrompt = prompt.length < 100;
            const preSelectorSize = (tokenOptimization && isSimplePrompt) ? 'MINI' : 'FULL';

            let protocol = `# IrsanAI-LRP v1.3 ‚Äì NEXT-LEVEL PROTOCOL
*Dies ist ein automatisch generiertes IrsanAI-LRP v1.3 Dokument*

## METADATEN (MASCHINENLESBAR)
\`\`\`yaml
creator: "IrsanAI Web-UI v1.3"
timestamp: "${timestamp}"
protocol_version: "1.3"
task_id: "${taskId}"
unique_key: "${uniqueKey}"
llm_target: "${selectedLLM}"
pre_selector_mode: "${preSelectorSize}"
token_budget: ${tokenBudget}
language: "${language}"
features:
  intent_confidence: ${intentConfidence}
  token_optimization: ${tokenOptimization}
  emergency_fallback: ${emergencyFallback}
  version_check: ${versionCheck}
\`\`\`

${versionCheck ? `## VERSION-CHECK
‚ö†Ô∏è **WICHTIG**: Dieses Protokoll nutzt LRP v1.3. Falls du mit einer √§lteren Version arbeitest, besuche: https://github.com/pythonlover2023/IrsanAI-LRP

` : ''}## USER-REQUEST
\`\`\`text
${prompt}
\`\`\`

## PRE-SELECTOR ANWEISUNG${preSelectorSize === 'MINI' ? ' (TOKEN-OPTIMIERT)' : ''}

${preSelectorSize === 'FULL' ? `F√ºhre folgenden META-ERKENNTNIS-PROZESS durch:

1. **SELBSTREFLEKTIERENDE INTENT-ANALYSE**
   - Ist das ein **einmaliges Produkt** oder **laufendes System**?
   - Ben√∂tigt es **Hardware-Zugriff** (OS, GPU, Aufl√∂sung)?
   - W√§re es **ohne Umgebungskenntnis suboptimal**?
   - Ist es **lokal ausf√ºhrbar** oder nur Sandbox-f√§hig?

2. **SYSTEMISCHES ENTSCHEIDUNGSMUSTER**
   
   **Weg 1 (Direkte Antwort)** NUR wenn:
   - Vollst√§ndig selbst-contained (Text/Bild/Code ohne HW)
   - Direkt im LLM-Sandbox ausf√ºhrbar
   - Keine Persistenz n√∂tig
   - Keine Hardware-Optimierung erforderlich
   
   **Weg 2 (OS/HW-Erkennung)** bei:
   - Code f√ºr lokale Ausf√ºhrung
   - Persistenz-Anforderungen
   - Hardware-Abh√§ngigkeiten (GPU, Aufl√∂sung, Performance)
   - Interaktive Systeme (GUI, Games, Visualisierungen)

3. **BEGR√úNDUNG DER ENTSCHEIDUNG**
   - Gib echte technische Gr√ºnde, keine Keywords
   - Erkl√§re: Warum ohne OS/HW-Erkennung suboptimal?
   - Erkl√§re: Welche Vorteile bringt die Erkennung?

${intentConfidence ? `4. **INTENT-CONFIDENCE-SCORE** ‚≠ê NEU in v1.3
   Bewerte deine Analyse-Sicherheit:
   \`\`\`
   Meine Intent-Analyse-Sicherheit: [X]%
   
   Unsicherheitsfaktoren:
   - [Faktor 1]: [Y]% Sicherheit
   - [Faktor 2]: [Z]% Sicherheit
   
   Gesamteinsch√§tzung: [HOCH/MITTEL/NIEDRIG]
   \`\`\`
   
   Falls Sicherheit < 70%: Frage pr√§zise nach!

5.` : '4.'} **BENUTZERBEST√ÑTIGUNG**
   "Ich verstehe: [ZUSAMMENFASSUNG] mit [X]% Sicherheit.
   
   üîç **Was du wolltest**: [KURZE ZUSAMMENFASSUNG]
   
   ‚úÖ **Weg 1: Direkte Antwort** ([Y]% Wahrscheinlichkeit)
      - Was du bekommst: [BESCHREIBUNG]
      - Warum: [BEGR√úNDUNG]
   
   ‚ö†Ô∏è **Weg 2: OS/HW-Erkennung** ([Z]% Wahrscheinlichkeit)
      - Was du bekommst: [BESCHREIBUNG]
      - Warum: [BEGR√úNDUNG]
   
   üí° Empfehlung: Weg [X] mit [MAX]% Wahrscheinlichkeit
   
   Ist das korrekt? (JA/NEIN)"

${intentConfidence ? '6.' : '5.'} **NACH "JA"-BEST√ÑTIGUNG**
   - **Weg 1**: Generiere direkt die L√∂sung
   - **Weg 2**: Generiere **NUR** \`IrsanAI_OS_HW_Detector.py\`
     - KEINE Erw√§hnung des Endprodukts
     - KEINE Feature-Beschreibungen
     - NUR der Detektor-Code

${intentConfidence ? '7.' : '6.'} **BEI "NEIN"**
   Fordere pr√§zise Kl√§rung der Abweichungen an` : 
`**MINI PRE-SELECTOR** (F√ºr einfache Anfragen)

Schnelle Analyse:
1. Braucht es Hardware-Kontext? (JA ‚Üí Weg 2, NEIN ‚Üí Weg 1)
2. Lokale Code-Ausf√ºhrung geplant? (JA ‚Üí Weg 2)
3. Falls unsicher: Frage nach

Best√§tigung:
"Ich verstehe: [ZUSAMMENFASSUNG]
Empfehlung: Weg [1/2]
Korrekt? (JA/NEIN)"

Bei JA:
- Weg 1: Direkte L√∂sung
- Weg 2: \`IrsanAI_OS_HW_Detector.py\` generieren`}

${emergencyFallback ? `

## EMERGENCY FALLBACK ‚≠ê NEU in v1.3
Falls du diese Anweisungen NICHT genau befolgen kannst:

**ANTWORTE MIT:**
\`\`\`
‚ö†Ô∏è PROTOKOLL-FEHLER ‚ö†Ô∏è

Ich kann IrsanAI-LRP v1.3 nicht vollst√§ndig verarbeiten.

Grund: [Erkl√§re das Problem]

Vorschlag:
1. Nutze ein LRP-kompatibles LLM (ChatGPT, Claude, Qwen)
2. Oder formuliere deine Anfrage ohne Protokoll

F√ºr Support: https://github.com/pythonlover2023/IrsanAI-LRP/issues
\`\`\`

**SENDE NICHTS ANDERES!**` : ''}

## SYSTEMANWEISUNGEN F√úR LLMs

${selectedLLM !== 'universal' ? `**OPTIMIERT F√úR: ${selectedLLM.toUpperCase()}**

` : ''}**KRITISCHE REGELN:**
1. Dies ist ein IrsanAI-LRP v1.3 Dokument - NICHTS au√üerhalb von USER-REQUEST √§ndern
2. Bearbeite NUR den USER-REQUEST Abschnitt
3. Antworte auf ${language === 'de' ? 'DEUTSCH' : language === 'en' ? 'ENGLISCH' : language === 'fr' ? 'FRANZ√ñSISCH' : 'SPANISCH'}
4. Nach JA auf Weg 2: Generiere NUR den OS/HW-Detektor
5. Bei Zweifel: FRAGE NACH statt zu raten

**TOKEN-BUDGET:** Max. ${tokenBudget} Tokens f√ºr deine Antwort

${tokenOptimization ? `**TOKEN-OPTIMIERUNG AKTIV:**
- Pre-Selector wurde auf ${preSelectorSize} optimiert
- Erwartete Token-Ersparnis: ${preSelectorSize === 'MINI' ? '~40%' : '~15%'}
- Bleibe pr√§zise und fokussiert
` : ''}
**QUALIT√ÑTSKRITERIEN:**
‚úÖ Klare Intent-Erfassung
‚úÖ Technische Begr√ºndungen (keine Keywords)
‚úÖ Benutzerbest√§tigung vor Code-Generierung
${intentConfidence ? '‚úÖ Intent-Confidence-Score angeben\n' : ''}‚úÖ Bei Weg 2: NUR Detektor-Code, sonst nichts

**PROTOKOLL-KONFORMIT√ÑT:**
Dieser LRP v1.3 wurde f√ºr maximale Kompatibilit√§t optimiert.
Falls Probleme auftreten ‚Üí Emergency Fallback nutzen!

---

**IrsanAI-LRP v1.3** | Erstellt: ${new Date().toLocaleString('de-DE')}
*Der Standard f√ºr strukturierte LLM-Kommunikation*
`;

            document.getElementById('output').textContent = protocol;
            
            // Success Animation
            const outputSection = document.getElementById('output');
            outputSection.style.animation = 'none';
            setTimeout(() => {
                outputSection.style.animation = 'slideUp 0.6s ease-out';
            }, 10);
        }

        function copyToClipboard() {
            const output = document.getElementById('output').textContent;
            if (output === 'Hier erscheint dein generiertes LRP-Protokoll...') {
                alert('Generiere erst ein Protokoll!');
                return;
            }
            
            navigator.clipboard.writeText(output).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = '‚úÖ Kopiert!';
                btn.style.background = '#28a745';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '#28a745';
                }, 2000);
            });
        }

        // Initialize
        updateMetrics();
    </script>
</body>
</html>